{"ast":null,"code":"var _jsxFileName = \"/home/ishan/project/TaskManager/Task manager/src/components/SignIn.js\";\nimport React, { useState, useContext, useEffect } from 'react';\nimport { useHistory, Link } from 'react-router-dom';\nimport firebase from '../firebase';\nimport logo from \"../assets/image/man.svg\";\nimport \"firebase/auth\";\nimport { Form, Label, Input, Button, FormGroup } from 'reactstrap';\nimport \"firebase/firestore\";\nimport { AuthContext } from '../Context/AuthContext';\nimport '../css/auth.css';\nexport const SignIn = () => {\n  const authContext = useContext(AuthContext);\n  const {\n    loadingAuthState\n  } = useContext(AuthContext);\n  const history = useHistory();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const db = firebase.firestore();\n  useEffect(() => {\n    firebase.auth().getRedirectResult().then(result => {\n      if (!result || !result.user || !firebase.auth().currentUser) {\n        return;\n      }\n\n      return setUserProfile().then(() => {\n        history.push(\"/\");\n      });\n    }).catch(error => {\n      console.log(error, 'error');\n    });\n  }, []);\n\n  const setUserProfile = async () => {\n    if (await isUserExists()) {\n      return;\n    }\n\n    const currentUser = firebase.auth().currentUser;\n    db.collection('Users').doc(currentUser.uid).set({\n      username: currentUser.displayName\n    }).then(() => {\n      console.log('saved');\n      return;\n    }).catch(error => {\n      console.log(error.message);\n      alert(error.message);\n    });\n  };\n\n  const isUserExists = async () => {\n    const doc = await db.collection(\"users\").doc(firebase.auth().currentUser.uid).get();\n    return doc.exists;\n  };\n\n  const onSubmit = e => {\n    e.preventDefault();\n    console.log('submitted');\n    firebase.auth().signInWithEmailAndPassword(email, password).then(res => {\n      authContext.setUser(res);\n      history.push('/');\n    }).catch(error => {\n      console.log(error.message);\n      alert(error.message);\n    });\n    setEmail('');\n    setPassword('');\n  };\n\n  if (loadingAuthState) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }\n    }, \"Loading...\"));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"auth-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"auth-content-items\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"auth-content-items-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"auth-content-items-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 25\n    }\n  }, \"Log In\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 25\n    }\n  }, \"Type your credentials and click Sign In\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"auth-content-items-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 21\n    }\n  }, error !== null && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 44\n    }\n  }, error), /*#__PURE__*/React.createElement(Form, {\n    className: \"auth-content-items-formfield\",\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 33\n    }\n  }, \"Your Email Address\", /*#__PURE__*/React.createElement(Input, {\n    type: \"email\",\n    onChange: e => setEmail(e.target.value),\n    name: \"email\",\n    value: email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 74\n    }\n  }))), /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    htmlFor: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 33\n    }\n  }, \"Password\", /*#__PURE__*/React.createElement(Input, {\n    type: \"password\",\n    onChange: e => setPassword(e.target.value),\n    name: \"password\",\n    value: password,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 67\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"auth-content-items-formButton\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 33\n    }\n  }, \"Sign In\"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/sign-in\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 33\n    }\n  }, \"Forgot Password?\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"auth-content-items-images\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logo,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 21\n    }\n  }))));\n};","map":{"version":3,"sources":["/home/ishan/project/TaskManager/Task manager/src/components/SignIn.js"],"names":["React","useState","useContext","useEffect","useHistory","Link","firebase","Form","Label","Input","Button","FormGroup","AuthContext","SignIn","authContext","loadingAuthState","history","email","setEmail","password","setPassword","error","setError","db","firestore","auth","getRedirectResult","then","result","user","currentUser","setUserProfile","push","catch","console","log","isUserExists","collection","doc","uid","set","username","displayName","message","alert","get","exists","onSubmit","e","preventDefault","signInWithEmailAndPassword","res","setUser","target","value","logo"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport { useHistory ,Link } from 'react-router-dom';\nimport firebase from '../firebase';\nimport logo from '../assets/image/man.svg';\nimport \"firebase/auth\";\nimport { Form, Label, Input, Button, FormGroup } from 'reactstrap'\nimport \"firebase/firestore\";\nimport { AuthContext } from '../Context/AuthContext';\nimport '../css/auth.css';\n\nexport const SignIn = () => {\n    const authContext = useContext(AuthContext);\n    const { loadingAuthState } = useContext(AuthContext);\n    const history = useHistory();\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [error, setError] = useState('');\n    const db = firebase.firestore();\n\n    useEffect(() => {\n        firebase\n            .auth()\n            .getRedirectResult()\n            .then(result => {\n                if (!result || !result.user || !firebase.auth().currentUser) {\n                    return;\n                }\n\n                return setUserProfile().then(() => {\n                    history.push(\"/\");\n                })\n            })\n            .catch(error => {\n                console.log(error, 'error')\n            })\n    }, [])\n\n    const setUserProfile = async () => {\n        if (await isUserExists()) {\n            return;\n        }\n\n        const currentUser = firebase.auth().currentUser;\n        db.collection('Users')\n            .doc(currentUser.uid)\n            .set({\n                username: currentUser.displayName\n            })\n            .then(() => {\n                console.log('saved');\n                return;\n            })\n            .catch(error => {\n                console.log(error.message);\n                alert(error.message);\n            })\n    }\n\n    const isUserExists = async () => {\n        const doc = await db\n            .collection(\"users\")\n            .doc(firebase.auth().currentUser.uid)\n            .get()\n        return doc.exists;\n    }\n\n    const onSubmit = (e) => {\n        e.preventDefault();\n        console.log('submitted');\n\n        firebase\n            .auth()\n            .signInWithEmailAndPassword(email, password)\n            .then(res => {\n                authContext.setUser(res);\n                history.push('/')\n            })\n            .catch(error => {\n                console.log(error.message);\n                alert(error.message);\n            })\n        setEmail('');\n        setPassword('');\n    }\n\n    if (loadingAuthState) {\n        return (\n            <div>\n                <h1>Loading...</h1>\n            </div>\n        )\n    }\n    return (\n        <div className=\"auth-content\">\n            <div className=\"auth-content-items\">\n                <div className=\"auth-content-items-text\">\n                    <div className=\"auth-content-items-header\">\n                        <h1>Log In</h1>\n                        <p>Type your credentials and click Sign In</p>\n                    </div>\n                    <div className=\"auth-content-items-form\">\n                        {error !== null && <div>{error}</div>}\n                        <Form className=\"auth-content-items-formfield\" onSubmit={onSubmit}>\n                            <FormGroup>\n                                <Label htmlFor=\"email\">Your Email Address<Input type=\"email\" onChange={(e) => setEmail(e.target.value)} name=\"email\" value={email} /></Label>\n                            </FormGroup>\n                            <FormGroup>\n                                <Label htmlFor=\"password\">Password<Input type=\"password\" onChange={(e) => setPassword(e.target.value)} name=\"password\" value={password} /></Label>\n                            </FormGroup>\n                            <div className=\"auth-content-items-formButton\">\n                                <Button type=\"submit\">Sign In</Button>\n                                <Link to='/sign-in'>Forgot Password?</Link>\n                            </div>\n                        </Form>\n                    </div>\n                </div>\n                <div className=\"auth-content-items-images\">\n                    <img src={logo} alt=\"\"/>\n                </div>\n            </div>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}